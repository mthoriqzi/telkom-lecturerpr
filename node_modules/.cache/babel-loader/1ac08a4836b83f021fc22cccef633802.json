{"ast":null,"code":"var _jsxFileName = \"/home/danu/tel-u/src/app.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport { useScript } from './Hooks/useScript'; // import jwt_decode from \"jwt-decode\";\n\nimport { useState } from 'react';\nimport GoogleLogin from 'react-google-login';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const [loginData, setLoginData] = useState(localStorage.getItem('loginData') ? JSON.parse(localStorage.getItem('loginData')) : null);\n\n  const handleFailure = result => {\n    alert(result);\n  };\n\n  const handleLogin = async googleData => {\n    const res = await fetch('/api/google-login', {\n      method: 'POST',\n      body: JSON.stringify({\n        token: googleData.tokenId\n      }),\n      headers: {\n        'Content-Type': 'application/json'\n      }\n    });\n    const data = await res.json();\n    setLoginData(data);\n    localStorage.setItem('loginData', JSON.stringify(data));\n  };\n\n  const handleLogout = () => {\n    localStorage.removeItem('loginData');\n    setLoginData(null);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"React Google Login App\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: loginData ? /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: [\"You logged in as \", loginData.email]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 19\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: handleLogout,\n            children: \"Logout\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 46,\n            columnNumber: 19\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(GoogleLogin, {\n          clientId: process.env.REACT_APP_GOOGLE_CLIENT_ID,\n          buttonText: \"Log in with Google\",\n          onSuccess: handleLogin,\n          onFailure: handleFailure,\n          cookiePolicy: 'single_host_origin'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 11\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\n_s(App, \"6583HdZ9a4q5J8nyUHTH20fbsMs=\");\n\n_c = App;\n;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useScript","useState","GoogleLogin","App","loginData","setLoginData","localStorage","getItem","JSON","parse","handleFailure","result","alert","handleLogin","googleData","res","fetch","method","body","stringify","token","tokenId","headers","data","json","setItem","handleLogout","removeItem","email","process","env","REACT_APP_GOOGLE_CLIENT_ID"],"sources":["/home/danu/tel-u/src/app.js"],"sourcesContent":["import React from 'react';\r\nimport { useScript } from './Hooks/useScript';\r\n// import jwt_decode from \"jwt-decode\";\r\nimport { useState } from 'react';\r\nimport GoogleLogin from 'react-google-login';\r\n\r\nfunction App() {\r\n    const [loginData, setLoginData] = useState(\r\n        localStorage.getItem('loginData')\r\n          ? JSON.parse(localStorage.getItem('loginData'))\r\n          : null\r\n      );\r\n    \r\n      const handleFailure = (result) => {\r\n        alert(result);\r\n      };\r\n    \r\n      const handleLogin = async (googleData) => {\r\n        const res = await fetch('/api/google-login', {\r\n          method: 'POST',\r\n          body: JSON.stringify({\r\n            token: googleData.tokenId,\r\n          }),\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        });\r\n    \r\n        const data = await res.json();\r\n        setLoginData(data);\r\n        localStorage.setItem('loginData', JSON.stringify(data));\r\n      };\r\n      const handleLogout = () => {\r\n        localStorage.removeItem('loginData');\r\n        setLoginData(null);\r\n      };\r\n    \r\n      return (\r\n        <div className=\"App\">\r\n          <header className=\"App-header\">\r\n            <h1>React Google Login App</h1>\r\n            <div>\r\n              {loginData ? (\r\n                <div>\r\n                  <h3>You logged in as {loginData.email}</h3>\r\n                  <button onClick={handleLogout}>Logout</button>\r\n                </div>\r\n              ) : (\r\n                <GoogleLogin\r\n                  clientId={process.env.REACT_APP_GOOGLE_CLIENT_ID}\r\n                  buttonText=\"Log in with Google\"\r\n                  onSuccess={handleLogin}\r\n                  onFailure={handleFailure}\r\n                  cookiePolicy={'single_host_origin'}\r\n                ></GoogleLogin>\r\n              )}\r\n            </div>\r\n          </header>\r\n        </div>\r\n      );\r\n};\r\n\r\nexport default App"],"mappings":";;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,SAAT,QAA0B,mBAA1B,C,CACA;;AACA,SAASC,QAAT,QAAyB,OAAzB;AACA,OAAOC,WAAP,MAAwB,oBAAxB;;;AAEA,SAASC,GAAT,GAAe;EAAA;;EACX,MAAM,CAACC,SAAD,EAAYC,YAAZ,IAA4BJ,QAAQ,CACtCK,YAAY,CAACC,OAAb,CAAqB,WAArB,IACIC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAX,CADJ,GAEI,IAHkC,CAA1C;;EAME,MAAMG,aAAa,GAAIC,MAAD,IAAY;IAChCC,KAAK,CAACD,MAAD,CAAL;EACD,CAFD;;EAIA,MAAME,WAAW,GAAG,MAAOC,UAAP,IAAsB;IACxC,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,mBAAD,EAAsB;MAC3CC,MAAM,EAAE,MADmC;MAE3CC,IAAI,EAAEV,IAAI,CAACW,SAAL,CAAe;QACnBC,KAAK,EAAEN,UAAU,CAACO;MADC,CAAf,CAFqC;MAK3CC,OAAO,EAAE;QACP,gBAAgB;MADT;IALkC,CAAtB,CAAvB;IAUA,MAAMC,IAAI,GAAG,MAAMR,GAAG,CAACS,IAAJ,EAAnB;IACAnB,YAAY,CAACkB,IAAD,CAAZ;IACAjB,YAAY,CAACmB,OAAb,CAAqB,WAArB,EAAkCjB,IAAI,CAACW,SAAL,CAAeI,IAAf,CAAlC;EACD,CAdD;;EAeA,MAAMG,YAAY,GAAG,MAAM;IACzBpB,YAAY,CAACqB,UAAb,CAAwB,WAAxB;IACAtB,YAAY,CAAC,IAAD,CAAZ;EACD,CAHD;;EAKA,oBACE;IAAK,SAAS,EAAC,KAAf;IAAA,uBACE;MAAQ,SAAS,EAAC,YAAlB;MAAA,wBACE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAA,UACGD,SAAS,gBACR;UAAA,wBACE;YAAA,gCAAsBA,SAAS,CAACwB,KAAhC;UAAA;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAQ,OAAO,EAAEF,YAAjB;YAAA;UAAA;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QADQ,gBAMR,QAAC,WAAD;UACE,QAAQ,EAAEG,OAAO,CAACC,GAAR,CAAYC,0BADxB;UAEE,UAAU,EAAC,oBAFb;UAGE,SAAS,EAAElB,WAHb;UAIE,SAAS,EAAEH,aAJb;UAKE,YAAY,EAAE;QALhB;UAAA;UAAA;UAAA;QAAA;MAPJ;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAuBL;;GAtDQP,G;;KAAAA,G;AAsDR;AAED,eAAeA,GAAf"},"metadata":{},"sourceType":"module"}